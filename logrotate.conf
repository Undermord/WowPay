# Конфигурация logrotate для WoW Bot
# Установка на сервере:
# sudo cp logrotate.conf /etc/logrotate.d/wowbot

/path/to/project/logs/bot.log {
    # Ротация по размеру
    size 10M

    # Хранить 10 ротированных файлов
    rotate 10

    # Сжимать старые логи
    compress
    delaycompress  # Не сжимать последний файл (bot.log.1)

    # Создавать новый файл с правами
    create 0644 root root

    # Не ругаться если файл отсутствует
    missingok

    # Не ротировать пустые файлы
    notifempty

    # Запускать ротацию раз в день (если размер превышен)
    daily

    # Использовать дату в имени файла (опционально)
    # dateext
    # dateformat -%Y%m%d

    # После ротации не нужен restart (бот пишет в stdout)
    # postrotate
    #     docker compose -f /path/to/docker-compose.yml restart bot
    # endscript
}
