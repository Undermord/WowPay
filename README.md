# WoW Subscription Telegram Bot

Telegram-–±–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏–≥—Ä–æ–≤—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫ World of Warcraft –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL.

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üåç **–ú–Ω–æ–≥–æ—Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥** - WoW KZ, UA, EU, TUR
- üìÅ **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤** - –ü–æ–¥–ø–∏—Å–∫–∏, –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –£—Å–ª—É–≥–∏
- üí¨ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** - FSM –¥–∏–∞–ª–æ–≥–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üë®‚Äçüíº **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ä–∞—Å—Å—ã–ª–∫–∏
- üì¢ **–ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏** - –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML –∏ —Ñ–æ—Ç–æ
- üõ°Ô∏è **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - Rate limiting, HTML –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∑–∞—â–∏—Ç–∞ –æ—Ç SQL injection/XSS
- ‚ö° **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - Batch loading –¥–ª—è —Ä–µ—à–µ–Ω–∏—è N+1 –ø—Ä–æ–±–ª–µ–º—ã
- üìä **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤ –∏ –≤—ã—Ä—É—á–∫–∏

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- Telegram Bot Token (–ø–æ–ª—É—á–∏—Ç—å —É [@BotFather](https://t.me/BotFather))
- Admin Chat ID (–≤–∞—à Telegram ID)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞

2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
```bash
cp .env.example .env
```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ:
```env
BOT_TOKEN=your_actual_bot_token
ADMIN_CHAT_ID=your_telegram_user_id  # –ú–æ–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é: 123,456,789
DATABASE_URL=postgres://wowbot:wowbot123@db:5432/wowbot?sslmode=disable
PAYMENT_CARD_NUMBER=–≤–∞—à_–Ω–æ–º–µ—Ä_–∫–∞—Ä—Ç—ã
```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:
```bash
docker compose up --build
```

–ë–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –°–æ–±–µ—Ä–µ—Ç—Å—è –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ PostgreSQL
- –ü—Ä–∏–º–µ–Ω–∏—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ (13 –º–∏–≥—Ä–∞—Ü–∏–π)
- –ó–∞–≥—Ä—É–∑–∏—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (4 —Ä–µ–≥–∏–æ–Ω–∞, 17 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, 53+ —Ç–æ–≤–∞—Ä–æ–≤)
- –ó–∞–ø—É—Å—Ç–∏—Ç—Å—è –∏ –±—É–¥–µ—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

- `/start` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- `/products` - –ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤ (—Ä–µ–≥–∏–æ–Ω—ã ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚Üí —Ç–æ–≤–∞—Ä—ã)
- `/my_orders` - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

- `/admin` - –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º
- `/cancel` - –û—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫:
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤** - –í—Å–µ–≥–æ, –≤ –æ–∂–∏–¥–∞–Ω–∏–∏, –æ–ø–ª–∞—á–µ–Ω–æ, –≤—ã—Ä—É—á–∫–∞
- üõ† **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω, –Ω–∞–∑–≤–∞–Ω–∏–π, –æ–ø–∏—Å–∞–Ω–∏–π, –≤–∏–¥–∏–º–æ—Å—Ç–∏
- ‚úèÔ∏è **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è** - –° –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π HTML –∏ placeholder {name}
- üì¢ **–ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏** - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å HTML –∏ —Ñ–æ—Ç–æ
- ‚úÖ **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã** - –û–¥–Ω–∏–º –∫–ª–∏–∫–æ–º –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

### –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–∫–∞–∑–∞

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–∑—ã–≤–∞–µ—Ç `/start` ‚Üí –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–î–∞–ª–µ–µ"
2. –í—ã–±–æ—Ä —Ä–µ–≥–∏–æ–Ω–∞ (KZ, UA, EU, TUR)
3. –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–ü–æ–¥–ø–∏—Å–∫–∏, –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –£—Å–ª—É–≥–∏)
4. –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞ ‚Üí –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ —Å —Ü–µ–Ω–æ–π
5. –ù–∞–∂–∏–º–∞–µ—Ç "–ö—É–ø–∏—Ç—å" ‚Üí –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–∫–∞–∑
6. –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ–ø–ª–∞—Ç–µ —Å –Ω–æ–º–µ—Ä–æ–º –∑–∞–∫–∞–∑–∞ (—Ñ–æ—Ä–º–∞—Ç: WOW241204123)
7. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –∑–∞–∫–∞–∑–µ –≤ Telegram
8. –ê–¥–º–∏–Ω –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –æ–ø–ª–∞—Ç—É —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ (–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è)

```
regions (—Ä–µ–≥–∏–æ–Ω—ã)
  ‚îî‚îÄ categories (–∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
      ‚îî‚îÄ products (—Ç–æ–≤–∞—Ä—ã)
```

#### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

**`regions`** - –ò–≥—Ä–æ–≤—ã–µ —Ä–µ–≥–∏–æ–Ω—ã
- `id`, `name`, `code` (KZ, UA, EU, TUR)

**`categories`** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤
- `id`, `name`, `region_id`, `description`, `sort_order`

**`products`** - –¢–æ–≤–∞—Ä—ã
- `id`, `name`, `category_id`, `price`, `description`
- `is_visible` - –§–ª–∞–≥ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
- `sort_order` - –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

**`orders`** - –ó–∞–∫–∞–∑—ã
- `order_id` - –ö–æ—Ä–æ—Ç–∫–∏–π ID —Ñ–æ—Ä–º–∞—Ç–∞ WOW241204123
- `user_id` - Telegram User ID
- `product_id` - Foreign Key –Ω–∞ products
- `price` - –¶–µ–Ω–∞ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–∫–∞–∑–∞
- `status` - created / paid / completed / cancelled

**`users`** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞ (–¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫)
- `user_id`, `username`, `first_name`, `last_name`
- `is_blocked` - –§–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–æ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

**`broadcasts`** - –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫
- `id`, `admin_id`, `text`, `status`
- `total_users`, `sent_count`, `failed_count`

**`broadcast_photos`** - –§–æ—Ç–æ –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫
- `id`, `broadcast_id`, `file_id`

**`bot_settings`** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞
- `welcome_message` - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (HTML + {name} placeholder)

## üõ† –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tgWow/
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ bot/
‚îÇ       ‚îî‚îÄ‚îÄ main.go                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.go                # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.go                # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ storage/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ postgres.go              # –†–∞–±–æ—Ç–∞ —Å –ë–î (pgx pool)
‚îÇ   ‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ html.go                  # HTML –≤–∞–ª–∏–¥–∞—Ü–∏—è (XSS –∑–∞—â–∏—Ç–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ html_test.go             # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ ratelimit/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ limiter.go               # Rate limiting (DDoS –∑–∞—â–∏—Ç–∞)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ limiter_test.go          # –¢–µ—Å—Ç—ã rate limiter
‚îÇ   ‚îú‚îÄ‚îÄ fsm/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ fsm.go                   # FSM –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ handlers/
‚îÇ       ‚îú‚îÄ‚îÄ handlers.go              # –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
‚îÇ       ‚îú‚îÄ‚îÄ commands.go              # –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ catalog.go               # –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–∞–ª–æ–≥—É
‚îÇ       ‚îú‚îÄ‚îÄ orders.go                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–∫–∞–∑–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ admin.go                 # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îÇ       ‚îú‚îÄ‚îÄ fsm.go                   # FSM –¥–∏–∞–ª–æ–≥–∏
‚îÇ       ‚îú‚îÄ‚îÄ broadcast.go             # –ú–∞—Å—Å–æ–≤—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ helpers.go               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ       ‚îî‚îÄ‚îÄ constants.go             # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îú‚îÄ‚îÄ 001-010_*.sql                # –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ 011_create_users.sql         # –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ 012_create_broadcasts.sql    # –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—Å—ã–ª–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ 013_create_broadcast_photos.sql
‚îú‚îÄ‚îÄ Dockerfile                        # Multi-stage build
‚îú‚îÄ‚îÄ docker-compose.yml                # Dev –æ–∫—Ä—É–∂–µ–Ω–∏–µ + Adminer
‚îú‚îÄ‚îÄ .env.example                      # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ .gitignore                        # Git ignore
‚îú‚îÄ‚îÄ .dockerignore                     # Docker ignore
‚îú‚îÄ‚îÄ go.mod / go.sum                   # Go –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ README.md                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ CLAUDE.md                         # –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–æ—Ç–∞
docker compose down

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –ë–î (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ!)
docker compose down -v

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
docker compose logs -f bot

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –ë–î
docker compose logs -f db

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
docker compose restart bot

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
docker compose build bot && docker compose up -d bot
```

### –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–ß–µ—Ä–µ–∑ Adminer (–≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)**
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
2. –°–∏—Å—Ç–µ–º–∞: PostgreSQL
3. –°–µ—Ä–≤–µ—Ä: `db`
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `wowbot`
5. –ü–∞—Ä–æ–ª—å: `wowbot123`
6. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `wowbot`

**–ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É**
```bash
docker compose exec db psql -U wowbot -d wowbot
```

**–ü–æ–ª–µ–∑–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã**
```sql
-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
\dt

-- –í—Å–µ —Ä–µ–≥–∏–æ–Ω—ã
SELECT * FROM regions;

-- –¢–æ–≤–∞—Ä—ã –ø–æ —Ä–µ–≥–∏–æ–Ω—É KZ
SELECT p.*, c.name as category, r.code as region
FROM products p
JOIN categories c ON p.category_id = c.id
JOIN regions r ON c.region_id = r.id
WHERE r.code = 'KZ';

-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–∫–∞–∑–æ–≤
SELECT status, COUNT(*), SUM(price) FROM orders GROUP BY status;

-- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
SELECT COUNT(*) FROM users WHERE is_blocked = false;
```

## üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–∞–ª–æ–≥–æ–º

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±–æ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/admin` –≤ –±–æ—Ç–µ
2. –ù–∞–∂–º–∏—Ç–µ "üõ† –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏"
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. –î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:
   - üí∞ –ò–∑–º–µ–Ω–∏—Ç—å —Ü–µ–Ω—É
   - ‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ
   - üìù –ò–∑–º–µ–Ω–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ
   - üëÅ –ü–æ–∫–∞–∑–∞—Ç—å/–°–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Adminer (–º–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8080
2. –í–æ–π–¥–∏—Ç–µ –≤ –ë–î (—Å–º. —Ä–∞–∑–¥–µ–ª "–î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö")
3. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ç–∞–±–ª–∏—Ü—ã `products`, `categories`, `regions`

```sql
-- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–æ–≤–∞—Ä
INSERT INTO products (name, category_id, price, description, is_visible, sort_order)
VALUES ('WoW –ü–æ–¥–ø–∏—Å–∫–∞ 18 –º–µ—Å—è—Ü–µ–≤', 1, 9990.00, '–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≤—ã–≥–æ–¥–∞!', true, 10);

-- –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–Ω—ã –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Ä–µ–≥–∏–æ–Ω–∞ –Ω–∞ +10%
UPDATE products SET price = price * 1.10
WHERE category_id IN (SELECT id FROM categories WHERE region_id = 1);

-- –°–∫—Ä—ã—Ç—å —Ç–æ–≤–∞—Ä
UPDATE products SET is_visible = false WHERE id = 42;
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–∞—á–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `migrations/009_seed_products.sql` –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î:
```bash
docker compose down -v
docker compose up --build
```

## üß™ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ Chat ID

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤–∞—à–µ–≥–æ Telegram Chat ID:

1. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É [@userinfobot](https://t.me/userinfobot)
2. –û–Ω –ø—Ä–∏—à–ª–µ—Ç –≤–∞—à ID
3. –£–∫–∞–∂–∏—Ç–µ —ç—Ç–æ—Ç ID –≤ `.env` –∫–∞–∫ `ADMIN_CHAT_ID`

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ë–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç:
- –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ callback'–∏
- –í—Å–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ë–î
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã

- ‚úÖ **Rate Limiting** - 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 100 –¥–ª—è –∞–¥–º–∏–Ω–æ–≤
- ‚úÖ **SQL Injection –∑–∞—â–∏—Ç–∞** - –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å pgx
- ‚úÖ **XSS –∑–∞—â–∏—Ç–∞** - HTML –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** - –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è ADMIN_CHAT_ID
- ‚úÖ **Context timeout** - 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å–µ—Ö –ë–î –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **Graceful shutdown** - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ SIGTERM

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**
- ‚ùó –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Ñ–∞–π–ª `.env` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –≤ git
- ‚ùó –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ë–î (—Å–µ–π—á–∞—Å `wowbot123`)
- ‚ùó –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- ‚ùó –ó–∞–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç—ã PostgreSQL (—É–±–µ—Ä–∏—Ç–µ `5432:5432` –∏–∑ docker-compose)
- ‚ùó –£–¥–∞–ª–∏—Ç–µ/–æ—Ç–∫–ª—é—á–∏—Ç–µ Adminer –≤ production –∏–ª–∏ –∑–∞—â–∏—Ç–∏—Ç–µ VPN

**–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ:**
- üîí –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL –¥–ª—è PostgreSQL
- üîí –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker secrets –≤–º–µ—Å—Ç–æ .env
- üîí –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- üîí –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- üîí –ù–∞—Å—Ç—Ä–æ–π—Ç–µ fail2ban –¥–ª—è SSH

## üöÄ Production Deployment

–°–º. –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ [DEPLOYMENT.md](DEPLOYMENT.md)

**–ö—Ä–∞—Ç–∫–∏–π —á–µ–∫–ª–∏—Å—Ç:**
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
2. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Å production –¥–∞–Ω–Ω—ã–º–∏ (–Ω–µ –∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ!)
3. –°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –ë–î –≤ `.env` –∏ `docker-compose.yml`
4. –£–±–µ—Ä–∏—Ç–µ –ø–æ—Ä—Ç `5432:5432` –∏–∑ `docker-compose.yml`
5. –£–¥–∞–ª–∏—Ç–µ/–∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ—Ä–≤–∏—Å `adminer`
6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: `docker compose up -d`
7. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ backup –ë–î (—Å–º. DEPLOYMENT.md)
8. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ Issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
